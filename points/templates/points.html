<!DOCTYPE html>
<html>
    <head>
        {% load static %} 
        <link href = "{% static 'css/style.css' %}" rel="stylesheet" type="text/css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Sofia+Sans:ital,wght@0,1..1000;1,1..1000&display=swap" rel="stylesheet">   
        <meta http-equiv="Content-Type"
        content="=text/html; charset = utf-8">
        <meta name="csrf-token" content="{{ csrf_token }}">
        <title>
            –ì–∏–¥ –ø–æ –≤–∫—É—Å–Ω—ã–º —Ç–æ—á–∫–∞–º –†–æ—Å—Å–∏–∏
        </title>
    </head>
    <body>
        <div id = "content">
            <header>
                <div id = "name">
                    <h1 >–ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π —Å–æ –≤–∫—É—Å–æ–º!</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href = "{% url 'home' %}"><span class="tooltip">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</span></a></li>
                        <li><a href="{% url 'point' %}"><span class="tooltip"></span>–í–∫—É—Å–Ω—ã–µ —Ç–æ—á–∫–∏</span></a></li>
                        <li><a href = "{% url 'contacts' %}"><span class="tooltip"></span>–û –Ω–∞—Å</span></a></li>
                    </ul> 
                </nav>
                <div class="actions">
                    {% if user.is_authenticated %}
                        <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏" -->
                        <form action="{% url 'logout' %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="auth">–í—ã–π—Ç–∏</button>
                        </form>
                    {% else %}
                        <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ "–í–æ–π—Ç–∏" –∏ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" -->
                        <button><a href="{% url 'login' %}" class="auth">–í–æ–π—Ç–∏</a></button>
                        <button><a href="{% url 'register' %}" class="auth">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></button>
                    {% endif %}
                </div>
            </header>
        </div>

        <div id = "main">
            <form method="GET">
        
                <label for="city">–ì–æ—Ä–æ–¥:</label>
                <select name="city" id="city">
                    <option value=""></option>
                    {% for city in cities %}
                        <option value="{{ city.id }}">{{ city.city }}</option>
                    {% endfor %}
                </select>
        
                <label for="type">–¢–∏–ø —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞:</label>
                <select name="type" id="type">
                    <option value=""></option>
                    {% for type in types %}
                        <option value="{{ type.id }}">{{ type.name }}</option>
                    {% endfor %}
                </select>
        
                <button type="submit">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </form>
        
            <ul>
                {% for point in points %}
                    <li class="tp">
                        <div class="point-container">
                            {% if point.image %}
                            <img src="{% static point.image.url %}" alt="{{ point.name }}" class="point-image">
                            {% endif %}
                            <div class="point-details">
                                <h3 class="point-name">{{ point.name }}</h3>
                                <p class="point-description">{{ point.description }}</p>
                                <p class="point-location">–ì–æ—Ä–æ–¥: {{ point.city.city }} - –¢–∏–ø: {{ point.type_p.name }}</p>
                                
                                <!-- –í–∞—à HTML-–∫–æ–¥ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ª–∞–π–∫–æ–≤ -->
                                <div class="like-section">
                                    {% if request.user.is_authenticated %}
                                        <a href="#" class="like-button" data-point-id="{{ point.id }}">
                                            {% if point.id in liked_points %}
                                                ‚ù§Ô∏è <!-- –ö—Ä–∞—Å–Ω–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ª–∞–π–∫–Ω—É–ª -->
                                            {% else %}
                                                ü§ç <!-- –ë–µ–ª–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ –ª–∞–π–∫–Ω—É–ª -->
                                            {% endif %}
                                        </a>
                                    {% else %}
                                        <a href="{% url 'login' %}?next={{ request.path }}" class="like-button">
                                            ü§ç <!-- –ë–µ–ª–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω -->
                                        </a>
                                    {% endif %}
                                </div>
                                <script src="{% static 'js/like.js' %}"></script>
                            </div>
                        </div>
                    </li>
                {% empty %}
                    <li>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ—á–µ–∫.</li>
                {% endfor %}
            </ul>
        </div>
        <footer>
            <a href="{% url 'contacts' %}">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏!</a>
        </footer>
    </body>
</html>